<!DOCTYPE html>
<html>

  <head>

  <title> Medias Test </title>
    <link rel="stylesheet" href="test1.css">
    

  <script src="//code.jquery.com/jquery-1.10.2.js"></script>
    <script  type="text/javascript" src="https://apis.google.com/js/client.js?onload=init"></script>
    <script type="text/javascript"  src="https://maps.googleapis.com/maps/api/js?key=AIzaSyBZGvhqAz0grBbzAbGdI_htb72q8uA_KlQ" >
    </script>
  </head>

  <body>

    <div class="nav">
      <div class="container">
      </div>
    </div>

    <div class="content">
      <div id="journeyMap">
      </div>
		  <div class="blog" >
      <div class="test"></div>
	    </div>
	  </div>



    <script>
     


    
    $.ajax({
      type: "GET",
      url: "https://www.googleapis.com/blogger/v3/blogs/2096447250273390307/posts?fetchBodies=true&fields=items(content%2Clocation(lat%2Clng)%2Cpublished%2Ctitle)&key=AIzaSyBZGvhqAz0grBbzAbGdI_htb72q8uA_KlQ",
      success: function(response) {


        var mapOptions = {
          center: new google.maps.LatLng(-15.840868, -70.025868),
          zoom: 3
        };
        var map = new google.maps.Map(document.getElementById('journeyMap'),
            mapOptions);

      
        for (var i = 0; i < response.items.length; i++) {
          //open a div for blog unique with the location in the response array
          $('<div></div>').addClass('posts'+i).appendTo('.blog');

          //add a div for the post content
          $('<div></div>').addClass('postsText').attr('id','postsText'+i).appendTo('.posts'+i);

          //Add blog text and titles
          $('#postsText'+i).append("<h2>" + response.items[i].title + "</h2>");
          $('#postsText'+i).append(response.items[i].content);



          for (lat in response.items[i].location) {

            //add a div for the post map
            $('<div></div>').addClass('postsMap').attr('id','postsMap'+i).appendTo('.posts'+i);

            var mapOptions = {
                center: new google.maps.LatLng(response.items[i].location.lat,response.items[i].location.lng),
                zoom: 3
              };
              var blogMap = new google.maps.Map($('#postsMap'+i)[0], mapOptions);
              $('#postsMap'+i).css('height', $('#postsText'+i).height());

              var myLatlng = new google.maps.LatLng(response.items[i].location.lat,response.items[i].location.lng);
              var marker = new google.maps.Marker({
                position: myLatlng,
                map: map,
                title: response.items[i].title
              })
          }

          if (i+1<response.items.length) {
            $('.posts'+i).append("<hr/>"+i);
          }
        }

      }
    });


      google.maps.event.addDomListener(window, 'load', initialize);

    </script>

  </body>
</html>