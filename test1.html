<!DOCTYPE html>
<html>

  <head>

  <title> Medias Test </title>
    <link rel="stylesheet" href="test1.css">
    

  <script src="//code.jquery.com/jquery-1.10.2.js"></script>
    <script  type="text/javascript" src="https://apis.google.com/js/client.js?onload=init"></script>
    <script type="text/javascript"  src="https://maps.googleapis.com/maps/api/js?key=AIzaSyBZGvhqAz0grBbzAbGdI_htb72q8uA_KlQ" >
    </script>
  </head>

  <body>
    <div class="nav">
      <div class="container">
      </div>
    </div>

    <div class="content">
      <div id="journeyMap">
      </div>
		  <div class="blogPic" >
        <div class="posts"  >
	      </div>
		   <!-- <div id="pic">
          <ul class="latest">
          </ul>
        </div> -->
	    </div>
	  </div>

    <script>
     
<!--
      create array outside of success loop

      in success Response Parse through blogger values
      var n = response.items[i].location.name.lastIndexOf(",");
      var country = response.items[i].location.name.substring(n);
      if (countryArray.length >0 ) {
        if (country not in countryArray)
          pop into country array
      } else {
          pop into country array
      }

      or create country array of objects
      countries= [
        {
          "name" : "",
          "latCenter" : "",
          "lngCenter" : ""
        }
      ]
-->


    
    $.ajax({
      type: "GET",
      url: "https://www.googleapis.com/blogger/v3/blogs/2096447250273390307/posts?fetchBodies=true&fields=items(content%2Clocation(lat%2Clng)%2Cpublished%2Ctitle)&key=AIzaSyBZGvhqAz0grBbzAbGdI_htb72q8uA_KlQ",
      success: function(response) {

        var mapOptions = {
          center: new google.maps.LatLng(-15.840868, -70.025868),
          zoom: 3
        };
        var map = new google.maps.Map(document.getElementById("journeyMap"),
            mapOptions);

      
        for (var i = 0; i < response.items.length; i++) {
            $(".posts").append("<h2>" + response.items[i].title + "</h2>");
            $(".posts").append(response.items[i].content);
            for (lat in response.items[i].location) {
              var myLatlng = new google.maps.LatLng(response.items[i].location.lat,response.items[i].location.lng);
              var marker = new google.maps.Marker({
              position: myLatlng,
              map: map,
              title: response.items[i].title
            })
            }
            if (i+1<response.items.length) {
              $(".posts").append("<hr/>");
            }
          }
      }
    });


      google.maps.event.addDomListener(window, 'load', initialize);

    </script>

  </body>
</html>